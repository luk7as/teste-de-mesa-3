using System;

class Program
{
    static void Main()
    {
        Menu menu = new Menu();
        menu.Exibir();
    }
}

class CalculadoraJuros
{
    public double CalcularMontante(double valorPresente, double taxa, double periodo)
    {
        return valorPresente * Math.Pow(1 + taxa, periodo);
    }
}

class Menu
{
    private CalculadoraJuros calculadora = new CalculadoraJuros();

    private int meses = 8;
    private int dias = 10;

    public void Exibir()
    {
        Console.WriteLine("=== CALCULADORA DE JUROS COMPOSTOS - TABELA MÊS A MÊS ===\n");

        // Escolha do capital
        Console.WriteLine("Escolha o Valor Presente Investido:");
        Console.WriteLine("1 - 1000");
        Console.WriteLine("2 - 5500");
        Console.WriteLine("3 - 12000");

        int opcaoValor;
        while (!int.TryParse(Console.ReadLine(), out opcaoValor) ||
               opcaoValor < 1 || opcaoValor > 3)
        {
            Console.WriteLine("Opção inválida.");
        }

        double capital = opcaoValor switch
        {
            1 => 1000,
            2 => 5500,
            3 => 12000
        };

        Console.WriteLine("\nEscolha a Taxa de Juros Mensal:");
        Console.WriteLine("1 - 3%");
        Console.WriteLine("2 - 2,48%");
        Console.WriteLine("3 - 2%");

        int opcaoTaxa;
        while (!int.TryParse(Console.ReadLine(), out opcaoTaxa) ||
               opcaoTaxa < 1 || opcaoTaxa > 3)
        {
            Console.WriteLine("Opção inválida.");
        }

        double taxa = opcaoTaxa switch
        {
            1 => 0.03,
            2 => 0.0248,
            3 => 0.02
        };

        double jurosAcumulados = 0;

        DateTime dataInicial = DateTime.Now;
        DateTime dataAtual = dataInicial;

        Console.WriteLine("\nData\t\tMês\tCapital\t\tJuros do Mês\tJuros Acumul.\tResgate\t\tSaldo Total");

        for (int mes = 1; mes <= meses; mes++)
        {
            double saldoInicial = capital;

            double jurosDoMes = capital * taxa;
            jurosAcumulados += jurosDoMes;

            double resgate = 0;

            if (mes == 5)
            {
                resgate = jurosAcumulados;
                jurosAcumulados = 0; 
            }

            double saldoTotal = capital + jurosAcumulados;

            Console.WriteLine(
                $"{dataAtual:dd/MM/yyyy}\t{mes}\t{capital:F2}\t\t{jurosDoMes:F2}\t\t{jurosAcumulados:F2}\t\t{resgate:F2}\t\t{saldoTotal:F2}"
            );

            dataAtual = dataAtual.AddMonths(1);
        }

        dataAtual = dataAtual.AddDays(dias);

        Console.WriteLine("\nResumo Final:");
        Console.WriteLine($"Data inicial: {dataInicial:dd/MM/yyyy}");
        Console.WriteLine($"Data final:   {dataAtual:dd/MM/yyyy}");
        Console.WriteLine("Período total: 8 meses e 10 dias");
        Console.WriteLine("Resgate TOTAL do rendimento acumulado no 5º mês");
    }
}
