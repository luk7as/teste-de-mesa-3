using System;

class Program
{
    static void Main()
    {
        Menu menu = new Menu();
        menu.Exibir();
    }
}

class CalculadoraJuros
{
    public double CalcularMontante(double valorPresente, double taxa, double periodo)
    {
        return valorPresente * Math.Pow(1 + taxa, periodo);
    }
}

class Menu
{
    private CalculadoraJuros calculadora = new CalculadoraJuros();

    private int meses = 8;
    private int dias = 10;

    public void Exibir()
    {
        double periodoTotal = meses + (dias / 30.0);
        double periodoResgate = 5;
        double percentualResgate = 0.5;

        Console.WriteLine("=== CALCULADORA DE JUROS COMPOSTOS - PROBLEMA 7 ===\n");

        Console.WriteLine("Escolha o Valor Presente Investido:");
        Console.WriteLine("1 - 1000");
        Console.WriteLine("2 - 5500");
        Console.WriteLine("3 - 12000");

        int opcaoValor;
        while (!int.TryParse(Console.ReadLine(), out opcaoValor) ||
               opcaoValor < 1 || opcaoValor > 3)
        {
            Console.WriteLine("Opção inválida.");
        }

        double capitalInicial = opcaoValor switch
        {
            1 => 1000,
            2 => 5500,
            3 => 12000
        };

        Console.WriteLine("\nEscolha a Taxa de Juros Mensal:");
        Console.WriteLine("1 - 3%");
        Console.WriteLine("2 - 2,48%");
        Console.WriteLine("3 - 2%");

        int opcaoTaxa;
        while (!int.TryParse(Console.ReadLine(), out opcaoTaxa) ||
               opcaoTaxa < 1 || opcaoTaxa > 3)
        {
            Console.WriteLine("Opção inválida.");
        }

        double taxa = opcaoTaxa switch
        {
            1 => 0.03,
            2 => 0.0248,
            3 => 0.02
        };

        double montanteNoResgate =
            calculadora.CalcularMontante(capitalInicial, taxa, periodoResgate);

        double valorResgatado = montanteNoResgate * percentualResgate;

        double saldoRestante = montanteNoResgate - valorResgatado;

        double periodoRestante = periodoTotal - periodoResgate;

        double montanteFinal =
            calculadora.CalcularMontante(saldoRestante, taxa, periodoRestante);

        double totalRecebido = valorResgatado + montanteFinal;

        double rendimentoTotal = totalRecebido - capitalInicial;

        Console.WriteLine("\n----------------------------------------------------");
        Console.WriteLine($"Valor inicial:           {capitalInicial:F2}");
        Console.WriteLine($"Taxa de juros mensal:    {taxa * 100}%");
        Console.WriteLine($"Resgate no 5º mês (50%): {valorResgatado:F2}");
        Console.WriteLine($"Saldo final investido:   {montanteFinal:F2}");
        Console.WriteLine($"Rendimento total:        {rendimentoTotal:F2}");
        Console.WriteLine("----------------------------------------------------");
    }
}
